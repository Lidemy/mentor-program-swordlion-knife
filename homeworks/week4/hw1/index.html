<html>
	<head>

		<style>
			.container {
				position: fixed;
				width:30%;
				border:1px solid;
			}

			.number {
				position: relative;
				display: flex;
				width: 80%; 
				margin:20px auto;
				justify-content: flex-end;
				border: 1px solid;
			}

			.row {
				display: flex;
				justify-content: space-around;
				font-size: 15px;
			}
			
			.row:last-child {
				margin-bottom: 10px;
			}

			button {
				margin-top: 10px;
				width:22%;
				font-size: 15px;
				font-family: 微軟正黑體;
			}

		</style>

		<script type="text/javascript">
			
			let controller =false;
			let math = '';
			let input = '';
			let input2= '';

			document.addEventListener('DOMContentLoaded' , function () {
				document.querySelector('.container').addEventListener('click', (e) => {
					let result = document.querySelector('.number');
					
					if (e.target.className === 'AC') {
						result.innerText = '0';
						controller =false;
						math = '';
						input = '';
						input2= '';
					}

					if(e.target.className === 'button') {
						if (result.innerText == '0' && e.target.innerText !== '.' ) {
							result.innerText = '';
						}
						else if (result.innerText == '0' && e.target.innerText === '.') {
							result.innerText = '0.';
						}
						
						if (controller) {
							 if(e.target.innerText === '.') {
							 	result.innerText = '0.';
							 	controller = false;
							 } 
							 else {
							 	result.innerText = e.target.innerText;
							 	controller = false;
							 }
						}
						else {
							if(e.target.innerText === '.' && !result.innerText.includes('.')) {
								result.innerText += e.target.innerText;
							}
							else if (e.target.innerText !== '.') {
								result.innerText += e.target.innerText;
							}
						}
					}

					if(e.target.className === 'calculater') {
						//連續加減乘除
						if (math && !controller){
							var input2 = parseFloat(result.innerText);
							if (math === '+') {
								result.innerText = input + input2;
							}
							if (math === '-') {
								result.innerText = input - input2;
							}
							if (math === '×') {
								result.innerText = input * input2;
							}
							if (math === '÷') {
								result.innerText = input / input2;
							}
							if (math === '%') {
								result.innerText = input % input2;
							}
							input = parseFloat(result.innerText);
							controller = true;
							math = e.target.innerText;
						}
						else {
							input = parseFloat(result.innerText);
							math = e.target.innerText;
							controller = true;
						}	
					}

					if(e.target.className === 'equal') {
						var input2 = parseFloat(result.innerText);
						if (math === '+') {
							result.innerText = input + input2;
						}
						if (math === '-') {
							result.innerText = input - input2;
						}
						if (math === '×') {
							result.innerText = input * input2;
						}
						if (math === '÷') {
							result.innerText = input / input2;
						}
						if (math === '%') {
							result.innerText = input % input2;
						}
						math = '';
						controller = true;
					}

				})
			})
		</script>

	</head>

	<body>
		<div class='container'>
			<h1 class='number'>0</h1>
			<div class='row'>
				<button class='useless'>X</button>
				<button class='useless'>X</button>
				<button class='calculater'>%</button>
				<button class='AC'>AC</button>
			</div>
			<div class='row'>
				<button class='button'>7</button>
				<button class='button'>8</button>
				<button class='button'>9</button>
				<button class='calculater'>÷</button>
			</div>

			<div class='row'>
				<button class='button'>4</button>
				<button class='button'>5</button>
				<button class='button'>6</button>
				<button class='calculater'>×</button>
			</div>

			<div class='row'>
				<button class='button'>1</button>
				<button class='button'>2</button>
				<button class='button'>3</button>
				<button class='calculater'>-</button>
			</div>

			<div class='row'>
				<button class='button'>0</button>
				<button class='button'>.</button>
				<button class='equal'>=</button>
				<button class='calculater'>+</button>
			</div>
		</div>


	</body>
</html>